define(["exports"],function(t){"use strict";function n(t,n){null==t.state&&(t.state={});const e=[];t.evt_sink.on("will_mount",function(){const o=n?n.call(t,t.props,t):t.subscribe(t.props);t.setState(o,function(){for(const[n,s]of Object.entries(o)){if(null==s||"function"!=typeof s.subscribe)throw new TypeError(`Subscription "${n}" does not have a subscribe() function`);e.push(s.subscribe(!1,e=>{t.setState(t=>e!==t[n]?{[n]:e}:null)}))}})}).on("will_unmount",function(){for(const t of e.splice(0,e.length))t()})}t.withSubscribe=function(t,e){const o={};for(const[s,i]of Object.entries(e))o[s]=class extends i{subscribe(t){}componentWillMount(){super.componentWillMount(),n(this),this.evt_sink.emit("will_mount")}componentDidMount(){this.evt_sink.emit("did_mount")}componentWillUnmount(){this.evt_sink.emit("will_unmount").clear()}get evt_sink(){return t.sink(this)}},o[s].prototype.evtbus=t;return o},t.bindSubscriptions=n,Object.defineProperty(t,"__esModule",{value:!0})});
